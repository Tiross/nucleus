language: node_js

node_js:
  - stable

before_script:
  - npm install

script:
  - npm run test

before_deploy:
  - npm run build
  - npm run build_docs
  - node index.js --config demo.nucleus.json

deploy:
  - provider: pages
    skip_cleanup: true
    local_dir: docs/build
    github_token: $GITHUB_TOKEN
    on:
      branch: master
      tags: true
